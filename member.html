<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>會員中心｜CarShine Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body class="csp-app">

  <header class="navbar">
    <div class="container row">
      <a class="brand" href="index.html">
        <img src="assets/img/logo.jpg" alt="CarShine Pro">
      </a>
      <nav class="navlinks">
        <a href="index.html">首頁</a>
        <a href="products.html">商品</a>
        <a href="services.html">專業服務</a>
        <a href="knowledge.html">洗車知識</a>
        <a href="faq.html">FAQ</a>
        <a href="about.html">關於我們</a>
      </nav>
      <div class="navright">
        <button id="openCartBtn" class="icon-btn"><i class="fa-solid fa-cart-shopping"></i><span id="cartBadge" class="badge" style="display:none">0</span></button>
        <a class="icon-btn active" href="member.html"><i class="fa-solid fa-user"></i></a>
        <button id="menuBtn" class="icon-btn menu-btn"><i class="fa-solid fa-bars"></i></button>
      </div>
    </div>
    <div id="mobileMenu" class="mobile-menu">
      <a href="index.html">首頁</a>
      <a href="products.html">商品</a>
      <a href="services.html">服務</a>
      <a href="knowledge.html">知識</a>
      <a href="faq.html">FAQ</a>
      <a href="about.html">關於</a>
      <a href="member.html">會員</a>
    </div>
  </header>

  <div class="page-head" style="background:var(--bg-subtle); padding:40px 0; border-bottom:1px solid var(--border);">
    <div class="container">
      <div class="h2" style="margin:0;">會員中心</div>
      <p class="p" style="margin:0;">歡迎回來，<span id="memberNameDisplay">訪客</span>。</p>
    </div>
  </div>

  <section class="section">
    <div class="container" style="display:grid; grid-template-columns: 280px 1fr; gap:32px; align-items:start;">
      
      <aside class="panel pad" style="padding:16px;">
        <div style="font-weight:700; margin-bottom:12px; padding:0 12px;">功能選單</div>
        <div style="display:grid; gap:4px;">
          <button id="tab-orders-btn" onclick="switchTab('orders')" 
             style="text-align:left; padding:10px 12px; background:#eff6ff; color:var(--primary); border-radius:8px; font-weight:600; border:none; cursor:pointer; width:100%;">
            <i class="fa-solid fa-receipt" style="margin-right:8px;"></i> 我的訂單
          </button>
          
          <button id="tab-settings-btn" onclick="switchTab('settings')" 
             style="text-align:left; padding:10px 12px; color:var(--muted); background:transparent; border-radius:8px; font-weight:600; border:none; cursor:pointer; width:100%;">
            <i class="fa-solid fa-user-gear" style="margin-right:8px;"></i> 帳戶設定
          </button>

          <div class="hr" style="margin:8px 0;"></div>
          
          <button id="openLogin" class="btn ghost full" onclick="toggleLogin(true)">
            <i class="fa-solid fa-right-to-bracket"></i> 會員登入
          </button>
          
          <button id="logoutBtn" class="btn full" style="color:#ef4444; border-color:#fee2e2; background:#fef2f2; display:none;" onclick="handleLogout()">
            <i class="fa-solid fa-right-from-bracket"></i> 登出
          </button>
        </div>
      </aside>

      <main>
        
        <div id="view-orders" class="panel pad">
          <div class="row">
            <div class="h3" style="margin:0;">近期訂單紀錄</div>
            <a href="products.html" class="btn primary"><i class="fa-solid fa-bag-shopping"></i> 去逛逛</a>
          </div>
          <div class="hr"></div>
          <div id="ordersBox">
            </div>
        </div>

        <div id="view-settings" class="panel pad" style="display:none;">
          <div class="h3" style="margin:0;">帳戶設定</div>
          <p class="p">您可以在此修改您的顯示名稱。</p>
          <div class="hr"></div>

          <form onsubmit="handleSaveSettings(event)" style="max-width:400px;">
            <div style="margin-bottom:20px;">
              <label style="display:block; font-weight:700; margin-bottom:8px;">顯示名稱</label>
              <input id="settingNameInput" type="text" required placeholder="請輸入新的暱稱" 
                     style="width:100%; padding:12px; border:1px solid var(--border); border-radius:8px;">
            </div>
            <button type="submit" class="btn primary">儲存變更</button>
          </form>
        </div>

      </main>

    </div>
  </section>

  <div id="loginModal" style="position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:300; display:none; place-items:center;" onclick="if(event.target===this)toggleLogin(false)">
    <div class="panel pad" style="width:100%; max-width:400px; position:relative; box-shadow:0 20px 50px rgba(0,0,0,0.2);">
      <button onclick="toggleLogin(false)" style="position:absolute; top:16px; right:16px; border:none; background:none; cursor:pointer; font-size:18px;"><i class="fa-solid fa-xmark"></i></button>
      <div class="h3" style="text-align:center; margin-bottom:20px;">會員登入</div>
      <div class="note" style="margin-bottom:20px; font-size:13px; text-align:center;">
        <i class="fa-solid fa-circle-info"></i> 預設帳號已自動填入，請直接點擊登入。
      </div>
      <form onsubmit="handleLogin(event)" style="display:grid; gap:16px;">
        <div>
          <label style="font-size:12px; font-weight:700; color:var(--muted); margin-bottom:4px; display:block;">Email / 帳號</label>
          <input class="field" type="text" name="email" required value="user" placeholder="請輸入帳號" style="width:100%; padding:12px; border:1px solid var(--border); border-radius:8px;">
        </div>
        <div>
          <label style="font-size:12px; font-weight:700; color:var(--muted); margin-bottom:4px; display:block;">密碼</label>
          <input class="field" type="password" name="password" required value="1234" placeholder="請輸入密碼" style="width:100%; padding:12px; border:1px solid var(--border); border-radius:8px;">
        </div>
        <button class="btn primary full" type="submit" style="margin-top:10px; height:48px; font-size:16px;">登入</button>
      </form>
    </div>
  </div>

  <div id="cartOverlay" class="cart-overlay"></div>
  <aside id="cartSidebar" class="cart">
    <div class="head"><span>購物車</span><button id="closeCartBtn" class="icon-btn" style="border:none;"><i class="fa-solid fa-xmark"></i></button></div>
    <div id="cartItems" class="items"></div>
    <div class="foot"><div class="row"><span>小計</span><b id="cartSubtotal">NT$ 0</b></div><a class="btn primary full" href="checkout.html">前往結帳</a></div>
  </aside>
  <div id="siteFooter"></div>
  <script src="script.js"></script>
</body>
</html>